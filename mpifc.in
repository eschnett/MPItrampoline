#!/bin/sh

# We choose to behave like OpenMPI in this respect.
#
# All OpenMPI versions support "-showme". Modern OpenMPI version also
# support "-showme:compile" and "-showme:link".
#
# MPICH supports "-compile-info" and "-link-info".

case "$1" in
    -show*:compile*)
        echo '@CMAKE_Fortran_COMPILER@ @CMAKE_Fortran_FLAGS@ -I@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_INCLUDEDIR@'
        exit 0
        ;;
    -show*:link*)
        echo '@CMAKE_Fortran_COMPILER@ @LINK_FLAGS@ -L@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBDIR@ -Wl,-rpath,@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBDIR@ -lmpifort -lmpi -ldl'
        exit 0
        ;;
    -show*)
        echo '@CMAKE_Fortran_COMPILER@ @CMAKE_Fortran_FLAGS@ -I@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_INCLUDEDIR@ @LINK_FLAGS@ -L@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBDIR@ -Wl,-rpath,@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBDIR@ -lmpifort -lmpi -ldl'
        exit 0
        ;;
esac

exec ${MPITRAMPOLINE_FC:-@CMAKE_Fortran_COMPILER@} @CMAKE_Fortran_FLAGS@ -I@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_INCLUDEDIR@ @LINK_FLAGS@ -L@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBDIR@ -Wl,-rpath,@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBDIR@ "$@" -lmpifort -lmpi -ldl
