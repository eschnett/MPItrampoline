#!/bin/sh

# All OpenMPI versions support "-showme". Modern OpenMPI version also
# support "-showme:compile" and "-showme:link".
#
# MPICH supports " -compile-info" and "-link-info".
#
# We impersonate OpenMPI.

if [ "x$1" = "x-showme:compile" ]; then
    echo '-I@CMAKE_INSTALL_PREFIX@/include'
    exit 0
elif [ "x$1" = "x-showme:link" ]; then
    echo '-L@CMAKE_INSTALL_PREFIX@/lib -lmpitrampoline -ldl'
    exit 0
elif [ "x$1" = "x-showme" ]; then
    echo '-I@CMAKE_INSTALL_PREFIX@/include -L@CMAKE_INSTALL_PREFIX@/lib -lmpitrampoline -ldl'
    exit 0
fi

exec ${MPITRAMPOLINE_CC:-cc} -I@CMAKE_INSTALL_PREFIX@/include -L@CMAKE_INSTALL_PREFIX@/lib "$@" -lmpitrampoline -ldl
